<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US" xml:lang="en-US">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="Jose Storopoli" />
  <meta name="author" content="Rik Huijzer" />
  <meta name="author" content="Lazaro Alonso" />
  <title>Cores e mapas de cores - Julia Data Science</title>
  <link rel="shortcut icon" type="image/png" href="/pt/favicon.png"/>
  <link rel="stylesheet" href="/pt/style.css"/>
    <script src="/pt/mousetrap.min.js"></script>
    <style>
  @font-face {
    font-family: JuliaMono-Regular;
    src: url("/pt/JuliaMono-Regular.woff2");
  }
  </style>
  <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-chtml-full.js" type="text/javascript"></script>
  <link rel="stylesheet" href="/pt/github.min.css">
<script src="/pt/highlight.min.js"></script>
<script src="/pt/julia.min.js"></script>
<script>
document.addEventListener('DOMContentLoaded', (event) => {
    document.querySelectorAll('pre').forEach((el) => {
        hljs.highlightElement(el);
    });
});
</script>
 
</head>
<body>
<script>
function click_next() {
  var next = document.getElementById('nav-next');
  next.firstElementChild.nextElementSibling.click();
}
function click_prev() {
  var prev = document.getElementById('nav-prev');
  prev.firstElementChild.click();
}
Mousetrap.bind('right', click_next);
Mousetrap.bind('h', click_prev);
Mousetrap.bind('left', click_prev);
Mousetrap.bind('l', click_next);
</script>

<div class="books-container">
<aside class="books-menu">
<input type="checkbox" id="menu">
<label for="menu">☰</label>
<div class="books-title">
<a href="/pt/">Julia Data Science</a>
</div><br />
<span class="books-subtitle">

</span>
<div class="books-menu-content">
<li><a class="menu-level-1" href="/pt/preface"><b>1</b> Prefácio</a></li>
<li><a class="menu-level-2" href="/pt/why_data_science"><b>1.1</b> O que é Ciência de Dad..</a></li>
<li><a class="menu-level-2" href="/pt/engineering"><b>1.2</b> Engenharia de software</a></li>
<li><a class="menu-level-2" href="/pt/agradecimentos"><b>1.3</b> Agradecimentos</a></li>
<li><a class="menu-level-1" href="/pt/why_julia"><b>2</b> Por que Julia?</a></li>
<li><a class="menu-level-2" href="/pt/non-programmers"><b>2.1</b> Para os que nunca progra..</a></li>
<li><a class="menu-level-2" href="/pt/programmers"><b>2.2</b> Para programadores</a></li>
<li><a class="menu-level-2" href="/pt/julia_accomplish"><b>2.3</b> O que Julia pretende alc..</a></li>
<li><a class="menu-level-2" href="/pt/julia_wild"><b>2.4</b> Julia Por Aí</a></li>
<li><a class="menu-level-1" href="/pt/julia_basics"><b>3</b> Básico de Julia</a></li>
<li><a class="menu-level-2" href="/pt/syntax"><b>3.1</b> Sintaxe da linguagem</a></li>
<li><a class="menu-level-2" href="/pt/data_structures"><b>3.2</b> Estruturas Nativas de Da..</a></li>
<li><a class="menu-level-2" href="/pt/filesystem"><b>3.3</b> Sistema de Arquivos</a></li>
<li><a class="menu-level-2" href="/pt/standardlibrary"><b>3.4</b> Biblioteca Padrão de Ju..</a></li>
<li><a class="menu-level-1" href="/pt/dataframes"><b>4</b> DataFrames.jl</a></li>
<li><a class="menu-level-2" href="/pt/load_save"><b>4.1</b> Carregar e salvar arquiv..</a></li>
<li><a class="menu-level-2" href="/pt/indexação-e-sumarização"><b>4.2</b> Indexação e Sumarização</a></li>
<li><a class="menu-level-2" href="/pt/filter_subset"><b>4.3</b> Filtro e Subconjunto</a></li>
<li><a class="menu-level-2" href="/pt/select"><b>4.4</b> Select</a></li>
<li><a class="menu-level-2" href="/pt/missing_data"><b>4.5</b> Tipos de Dados e Dados F..</a></li>
<li><a class="menu-level-2" href="/pt/join"><b>4.6</b> Join</a></li>
<li><a class="menu-level-2" href="/pt/transformações-de-variáveis"><b>4.7</b> Transformações de Vari..</a></li>
<li><a class="menu-level-2" href="/pt/groupby_combine"><b>4.8</b> Groupby e Combine</a></li>
<li><a class="menu-level-2" href="/pt/df_performance"><b>4.9</b> Desempenho</a></li>
<li><a class="menu-level-1" href="/pt/DataVisualizationMakie"><b>5</b> Visualização de dados co..</a></li>
<li><a class="menu-level-2" href="/pt/cairomakie"><b>5.1</b> CairoMakie.jl</a></li>
<li><a class="menu-level-2" href="/pt/datavisMakie_attributes"><b>5.2</b> Atributos</a></li>
<li><a class="menu-level-2" href="/pt/themes"><b>5.3</b> Temas</a></li>
<li><a class="menu-level-2" href="/pt/usando-latexstrings.jl"><b>5.4</b> Usando LaTeXStrings.jl</a></li>
<li><a class="menu-level-2" href="/pt/makie_colors"><b>5.5</b> Cores e mapas de cores</a></li>
<li><a class="menu-level-2" href="/pt/makie_layouts"><b>5.6</b> Layouts</a></li>
<li><a class="menu-level-2" href="/pt/glmakie"><b>5.7</b> GLMakie.jl</a></li>
<li><a class="menu-level-1" href="/pt/appendix"><b>6</b> Apêndice</a></li>
<li><a class="menu-level-2" href="/pt/appendix_pkg"><b>6.1</b> Versões dos Pacotes</a></li>
<li><a class="menu-level-2" href="/pt/notation"><b>6.2</b> Formatação</a></li>
<li><a class="menu-level-1" href="/pt/referências"><b></b> Referências</a></li>
</div>
</aside>

<div class="books-content">
<h2 data-number="5.5" id="sec:makie_colors"><span class="header-section-number">5.5</span> Cores e mapas de cores</h2>
<p>Escolher um conjunto apropriado de cores ou barra de cores para sua plotagem é uma parte essencial para apresentação de resultados. <a href="https://github.com/JuliaGraphics/Colors.jl">Colors.jl</a> é suportado em <code>Makie.jl</code> para que você possa usar <a href="https://juliagraphics.github.io/Colors.jl/latest/namedcolors/">cores nomeadas</a> ou passar valores <code>RGB</code> ou <code>RGBA</code>. Além disso, os mapas de cores <a href="https://github.com/JuliaGraphics/ColorSchemes.jl">ColorSchemes.jl</a> e <a href="https://github.com/peterkovesi/PerceptualColourMaps.jl">PerceptualColourMaps.jl</a> também podem ser usados. Vale a pena saber que você pode reverter um mapa de cores fazendo <code>Reverse(:colormap_name)</code> para obter uma cor transparente ou mapa de cores com <code>color=(:red,0.5)</code> e <code>colormap=(:viridis, 0.5)</code>.</p>
<p>Diferentes casos de uso serão mostrados a seguir. Então vamos definir um tema personalizado com novas cores e uma paleta de cores.</p>
<p>Por padrão <code>Makie.jl</code> tem um conjunto predefinido de cores para percorrê-las automaticamente. Conforme mostrado nas figuras anteriores, onde nenhuma cor específica foi definida. A substituição desses padrões é feita chamando a palavra-chave <code>color</code> na função de plotagem e especificando uma nova cor por meio de um <code>Symbol</code> ou <code>String</code>. Veja isso em ação no exemplo a seguir:</p>
<pre class="language-julia"><code>function set_colors_and_cycle()
    # Epicycloid lines
    x(r, k, θ) = r * (k .+ 1.0) .* cos.(θ) .- r * cos.((k .+ 1.0) .* θ)
    y(r, k, θ) = r * (k .+ 1.0) .* sin.(θ) .- r * sin.((k .+ 1.0) .* θ)
    θ = LinRange(0, 6.2π, 1000)
    axis = (; xlabel=L&quot;x(\theta)&quot;, ylabel=L&quot;y(\theta)&quot;,
        title=&quot;Epicycloid&quot;, aspect=DataAspect())
    figure = (; resolution=(600, 400), font=&quot;CMU Serif&quot;)
    fig, ax, _ = lines(x(1, 1, θ), y(1, 1, θ); color=&quot;firebrick1&quot;, # string
        label=L&quot;1.0&quot;, axis=axis, figure=figure)
    lines!(ax, x(4, 2, θ), y(4, 2, θ); color=:royalblue1, #symbol
        label=L&quot;2.0&quot;)
    for k = 2.5:0.5:5.5
        lines!(ax, x(2k, k, θ), y(2k, k, θ); label=latexstring(&quot;$(k)&quot;)) #cycle
    end
    Legend(fig[1, 2], ax, latexstring(&quot;k, r = 2k&quot;), merge=true)
    fig
end
set_colors_and_cycle()</code></pre>
<figure>
<img src="/pt/im/JDS_set_colors_and_cycle_.svg" id="fig:set_colors_and_cycle" alt="Figure 21: Set colors and cycle." /><figcaption aria-hidden="true">Figure 21: Set colors and cycle.</figcaption>
</figure>
<p>Onde, nas duas primeiras linhas, usamos a palavra-chave <code>color</code> para especificar nossa cor. O resto está usando o padrão do conjunto de cores do ciclo. Mais tarde, aprenderemos como fazer um ciclo personalizado.</p>
<p>Em relação aos mapas de cores, já estamos familiarizados com a palavra-chave <code>colormap</code> para <code>heatmap</code>s e <code>scatter</code>s. Aqui, mostramos que um mapa de cores também pode ser especificado por meio de um <code>Symbol</code> ou uma <code>String</code>, semelhante a cores. Ou até mesmo um vetor de cores <code>RGB</code>. Vamos fazer nosso primeiro exemplo chamando mapas de cores como <code>Symbol</code>, <code>String</code> e <code>cgrad</code> para valores categóricos. Cheque <code>?cgrad</code> para mais informações.</p>
<pre class="language-julia"><code>figure = (; resolution=(600, 400), font=&quot;CMU Serif&quot;)
axis = (; xlabel=L&quot;x&quot;, ylabel=L&quot;y&quot;, aspect=DataAspect())
fig, ax, pltobj = heatmap(rand(20, 20); colorrange=(0, 1),
    colormap=Reverse(:viridis), axis=axis, figure=figure)
Colorbar(fig[1, 2], pltobj, label = &quot;Reverse colormap Sequential&quot;)
fig</code></pre>
<figure>
<img src="/pt/im/Reverse_colormap_sequential.svg" id="fig:Reverse_colormap_sequential" style="width:60.0%" alt="Figure 22: Reverse colormap sequential and colorrange." /><figcaption aria-hidden="true">Figure 22: Reverse colormap sequential and colorrange.</figcaption>
</figure>
<p>Ao definir um <code>colorrange</code> geralmente os valores fora deste intervalo são coloridos com a primeira e a última cor do mapa de cores. No entanto, às vezes é melhor especificar a cor desejada em ambas as extremidades. Fazemos isso com <code>highclip</code> e <code>lowclip</code>:</p>
<pre><code>using ColorSchemes</code></pre>
<pre class="language-julia"><code>figure = (; resolution=(600, 400), font=&quot;CMU Serif&quot;)
axis = (; xlabel=L&quot;x&quot;, ylabel=L&quot;y&quot;, aspect=DataAspect())
fig, ax, pltobj=heatmap(randn(20, 20); colorrange=(-2, 2),
    colormap=&quot;diverging_rainbow_bgymr_45_85_c67_n256&quot;,
    highclip=:black, lowclip=:white, axis=axis, figure=figure)
Colorbar(fig[1, 2], pltobj, label = &quot;Diverging colormap&quot;)
fig</code></pre>
<figure>
<img src="/pt/im/diverging_colormap.svg" id="fig:diverging_colormap" style="width:60.0%" alt="Figure 23: Diverging Colormap with low and high clip." /><figcaption aria-hidden="true">Figure 23: Diverging Colormap with low and high clip.</figcaption>
</figure>
<p>Mas mencionamos que também vetores <code>RGB</code> são opções válidas. Para o nosso próximo exemplo, você pode passar o mapa de cores personalizado <em>perse</em> ou usar <code>cgrad</code> para forçar um <code>Colorbar</code> categórico.</p>
<pre><code>using Colors, ColorSchemes</code></pre>
<pre class="language-julia"><code>figure = (; resolution=(600, 400), font=&quot;CMU Serif&quot;)
axis = (; xlabel=L&quot;x&quot;, ylabel=L&quot;y&quot;, aspect=DataAspect())
cmap = ColorScheme(range(colorant&quot;red&quot;, colorant&quot;green&quot;, length=3))
mygrays = ColorScheme([RGB{Float64}(i, i, i) for i in [0.0, 0.5, 1.0]])
fig, ax, pltobj = heatmap(rand(-1:1, 20, 20);
    colormap=cgrad(mygrays, 3, categorical=true, rev=true), # cgrad and Symbol, mygrays,
    axis=axis, figure=figure)
cbar = Colorbar(fig[1, 2], pltobj, label=&quot;Categories&quot;)
cbar.ticks = ([-0.66, 0, 0.66], [&quot;-1&quot;, &quot;0&quot;, &quot;1&quot;])
fig</code></pre>
<figure>
<img src="/pt/im/categorical_colormap.svg" id="fig:categorical_colormap" style="width:60.0%" alt="Figure 24: Categorical Colormap." /><figcaption aria-hidden="true">Figure 24: Categorical Colormap.</figcaption>
</figure>
<p>Por fim, os tiques na barra de cores para o caso categorial não são centralizados por padrão em cada cor. Isso é corrigido passando ticks personalizados, como em <code>cbar.ticks = (positions, ticks)</code>. A última situação é passar uma tupla de duas cores para o <code>colormap</code> como símbolos, strings ou uma mistura. Você obterá um mapa de cores interpolado entre essas duas cores.</p>
<p>Além disso, cores codificadas em hexadecimal também são aceitas. Então, no topo do nosso mapa de calor, vamos colocar um ponto semitransparente usando:</p>
<pre class="language-julia"><code>figure = (; resolution=(600, 400), font=&quot;CMU Serif&quot;)
axis = (; xlabel=L&quot;x&quot;, ylabel=L&quot;y&quot;, aspect=DataAspect())
fig, ax, pltobj = heatmap(rand(20, 20); colorrange=(0, 1),
    colormap=(:red, &quot;black&quot;), axis=axis, figure=figure)
scatter!(ax, [11], [11], color=(&quot;#C0C0C0&quot;, 0.5), markersize=150)
Colorbar(fig[1, 2], pltobj, label=&quot;2 colors&quot;)
fig</code></pre>
<figure>
<img src="/pt/im/colormap_two_colors.svg" id="fig:colormap_two_colors" style="width:60.0%" alt="Figure 25: Colormap from two colors." /><figcaption aria-hidden="true">Figure 25: Colormap from two colors.</figcaption>
</figure>
<h3 data-number="5.5.1" id="ciclo-personalizado"><span class="header-section-number">5.5.1</span> Ciclo personalizado</h3>
<p>Aqui, poderíamos definir um <code>Tema</code> global com um novo ciclo de cores, mas essa <strong>não é a maneira recomendada</strong> de fazer isso. É melhor definir um novo tema e usar como mostramos antes. Vamos definir um novo com um <code>cycle</code> para <code>:color</code>, <code>:linestyle</code>, <code>:marker</code> e um novo padrão <code>colormap</code>. Vamos adicionar esses novos atributos ao nosso <code>publication_theme</code> anterior.</p>
<pre class="language-julia"><code>function new_cycle_theme()
    # https://nanx.me/ggsci/reference/pal_locuszoom.html
    my_colors = [&quot;#D43F3AFF&quot;, &quot;#EEA236FF&quot;, &quot;#5CB85CFF&quot;, &quot;#46B8DAFF&quot;,
        &quot;#357EBDFF&quot;, &quot;#9632B8FF&quot;, &quot;#B8B8B8FF&quot;]
    cycle = Cycle([:color, :linestyle, :marker], covary=true) # alltogether
    my_markers = [:circle, :rect, :utriangle, :dtriangle, :diamond,
        :pentagon, :cross, :xcross]
    my_linestyle = [nothing, :dash, :dot, :dashdot, :dashdotdot]
    Theme(
        fontsize=16, font=&quot;CMU Serif&quot;,
        colormap=:linear_bmy_10_95_c78_n256,
        palette=(color=my_colors, marker=my_markers, linestyle=my_linestyle),
        Lines=(cycle=cycle,), Scatter=(cycle=cycle,),
        Axis=(xlabelsize=20, xgridstyle=:dash, ygridstyle=:dash,
            xtickalign=1, ytickalign=1, yticksize=10, xticksize=10,
            xlabelpadding=-5, xlabel=&quot;x&quot;, ylabel=&quot;y&quot;),
        Legend=(framecolor=(:black, 0.5), bgcolor=(:white, 0.5)),
        Colorbar=(ticksize=16, tickalign=1, spinewidth=0.5),
    )
end</code></pre>
<p>E aplique-o a uma função de plotagem como a seguinte:</p>
<pre class="language-julia"><code>function scatters_and_lines()
    x = collect(0:10)
    xh = LinRange(4, 6, 25)
    yh = LinRange(70, 95, 25)
    h = randn(25, 25)
    fig = Figure(resolution=(600, 400), font=&quot;CMU Serif&quot;)
    ax = Axis(fig[1, 1], xlabel=L&quot;x&quot;, ylabel=L&quot;f(x,a)&quot;)
    for i in x
        lines!(ax, x, i .* x; label=latexstring(&quot;$(i) x&quot;))
        scatter!(ax, x, i .* x; markersize=13, strokewidth=0.25,
            label=latexstring(&quot;$(i) x&quot;))
    end
    hm = heatmap!(xh, yh, h)
    axislegend(L&quot;f(x)&quot;; merge=true, position=:lt, nbanks=2, labelsize=14)
    Colorbar(fig[1, 2], hm, label=&quot;new default colormap&quot;)
    limits!(ax, -0.5, 10.5, -5, 105)
    colgap!(fig.layout, 5)
    fig
end</code></pre>
<pre class="language-julia"><code>with_theme(scatters_and_lines, new_cycle_theme())</code></pre>
<figure>
<img src="/pt/im/custom_cycle.svg" id="fig:custom_cycle" style="width:60.0%" alt="Figure 26: Custom theme with new cycle and colormap." /><figcaption aria-hidden="true">Figure 26: Custom theme with new cycle and colormap.</figcaption>
</figure>
<p>Neste ponto, você deve ter <strong>controle completo</strong> sobre suas cores, estilos de linha, marcadores e mapas de cores para seus <em>plots</em>. A seguir, veremos como gerenciar e controlar <strong><em>layouts</em></strong>.</p>


<div class="bottom-nav">
    <p id="nav-prev" style="text-align: left;">
        <a class="menu-level-2" href="/pt/usando-latexstrings.jl"><b>5.4</b> Usando LaTeXStrings.jl</a> <kbd>←</kbd>
        <span id="nav-next" style="float: right;">
            <kbd>→</kbd> <a class="menu-level-2" href="/pt/makie_layouts"><b>5.6</b> Layouts</a>
        </span>
    </p>
</div>


<div class="license">
    <br/>
  <br/>
  <a href="http://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a>
    Jose Storopoli, Rik Huijzer, Lazaro Alonso
</div>
</div>
</div>
</body>
</html>